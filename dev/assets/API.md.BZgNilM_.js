import{_ as p,C as h,c as r,o as k,j as i,a as t,aA as n,G as e,w as l}from"./chunks/framework.NUnwCWZO.js";const f=JSON.parse('{"title":"API","description":"","frontmatter":{},"headers":[],"relativePath":"API.md","filePath":"API.md","lastUpdated":null}'),o={name:"API.md"},d={class:"jldocstring custom-block",open:""},c={class:"jldocstring custom-block",open:""};function E(g,s,m,y,u,b){const a=h("Badge");return k(),r("div",null,[s[8]||(s[8]=i("h1",{id:"API",tabindex:"-1"},[t("API "),i("a",{class:"header-anchor",href:"#API","aria-label":'Permalink to "API {#API}"'},"â€‹")],-1)),i("details",d,[i("summary",null,[s[0]||(s[0]=i("a",{id:"SBMLImporter.load_SBML",href:"#SBMLImporter.load_SBML"},[i("span",{class:"jlbinding"},"SBMLImporter.load_SBML")],-1)),s[1]||(s[1]=t()),e(a,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[3]||(s[3]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">load_SBML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path; massaction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Import an <a href="https://sbml.org/" target="_blank" rel="noreferrer">SBML</a> model into a <code>ParsedReactionNetwork</code> that can be simulated as a <code>JumpProblem</code> for Gillespie simulations, a <code>SDEProblem</code> for chemical Langevin simulations, or an <code>ODEProblem</code> for deterministic simulations.</p><p>The keyword <code>massaction</code> should be set to <code>true</code> if the model reactions follow chemical <a href="https://en.wikipedia.org/wiki/Law_of_mass_action" target="_blank" rel="noreferrer">mass action</a> kinetics. This is because the most efficient <code>JumpProblem</code> (Gillespie) simulators require mass action jumps, for more details see <a href="https://docs.sciml.ai/JumpProcesses/stable/jump_types/" target="_blank" rel="noreferrer">here</a>. For how to check if a model follows mass action kinetics, see the FAQ in the documentation.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>The <code>massaction</code> keyword argument is only relevant for jump simulations. If you import the model as a <code>SDEProblem</code> or an <code>ODEProblem</code>, you can (and should) ignore this keyword argument.</p></div><p><strong>Keyword arguments</strong></p><ul><li><p><code>complete::Bool=true</code>: Whether or not to mark the returned Catalyst <code>ReactionSystem</code> as complete. Only a complete system can be used for simulations, while only an incomplete system can be composed with other systems. For more details, see the Catalyst.jl <a href="https://docs.sciml.ai/Catalyst/stable/" target="_blank" rel="noreferrer">documentation</a>.</p></li><li><p><code>ifelse_to_callback::Bool=true</code>: Rewrite <code>ifelse</code> (SBML piecewise) expressions to <a href="https://github.com/SciML/DiffEqCallbacks.jl" target="_blank" rel="noreferrer">callbacks</a>. This improves simulation runtime and stability. Strongly recomended to set to <code>true</code>.</p></li><li><p><code>inline_assignment_rules::Bool=false</code>: Inline SBML assignment rules into model equations. Recommended for importing large models. <strong>However</strong>, if set to <code>true</code>, it is not possible to access assignment rule variables via <code>sol[:var]</code>.</p></li><li><p><code>inline_kineticlaw_parameters::Bool=true</code>: Inline (hardcode) SBML kinetic law parameter values into the model equations. Kinetic law parameters are parameters defined only in the kinetic law field of an SBML reaction. It is recommended to inline them as there might be duplicate IDs, e.g., the same kinetic law parameter redefined for different reactions. If they are not inlined, they are promoted to model parameters (with the same status as parameters in the SBML file).</p></li><li><p><code>write_to_file=false</code>: Write the parsed SBML model to a Julia file in the same directory as the SBML file.</p></li><li><p><code>model_as_string::Bool=false</code>: Whether the model (<code>path</code>) is provided as a string.</p></li></ul><p><strong>Returns</strong></p><ul><li><p><code>prn</code>: A <code>ParsedReactionNetwork</code> that can be converted into a <code>JumpProblem</code>, a <code>SDEProblem</code>, or an <code>ODEProblem</code>. Important fields are:</p><ul><li><p><code>prn.rn</code>: A <a href="https://github.com/SciML/Catalyst.jl" target="_blank" rel="noreferrer">Catalyst.jl</a> <code>ReactionNetwork</code>.</p></li><li><p><code>prn.u0</code>: A value map for setting initial values for model species.</p></li><li><p><code>prn.p</code>: A value map for setting model parameter values.</p></li></ul></li><li><p><code>cbset</code>: A <code>CallbackSet</code> with SBML events and SBML piecewise functions.</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Import and simulate model as a JumpProblem</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SBMLImporter, JumpProcesses</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prn, cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> load_SBML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path; massaction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tspan </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dprob </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DiscreteProblem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rn, prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">u0, tspan, prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">jprob </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JumpProblem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rn, dprob, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Direct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> solve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(jprob, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SSAStepper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cb)</span></span></code></pre></div><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Import and simulate model as a SDE</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SBMLImporter, StochasticDiffEq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prn, cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> load_SBML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tspan </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sprob </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SDEProblem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rn, prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">u0, tspan, prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> solve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sprob, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LambaEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cb)</span></span></code></pre></div><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Import and simulate model as an ODE</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SBMLImporter, OrdinaryDiffEq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prn, cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> load_SBML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">oprob </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ODEProblem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rn, prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">u0, tspan, prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> solve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oprob, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Rodas5P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cb)</span></span></code></pre></div>`,12)),e(a,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[2]||(s[2]=[i("a",{href:"https://github.com/sebapersson/SBMLImporter.jl/blob/1ecf45f449a5811121e98771c7e86c8b600e57bf/src/load.jl#L1-L73",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",c,[i("summary",null,[s[4]||(s[4]=i("a",{id:"SBMLImporter.getcompartment",href:"#SBMLImporter.getcompartment"},[i("span",{class:"jlbinding"},"SBMLImporter.getcompartment")],-1)),s[5]||(s[5]=t()),e(a,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[7]||(s[7]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getcompartment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s)</span></span></code></pre></div><p>For an SBML specie <code>s</code>, get its associated SBML <code>compartment</code>.</p><p>If <code>s</code> does not have a compartment, or is not a specie, <code>nothing</code> is returned.</p><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get compartment for first model specie</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SBMLImporter, Catalyst</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prn, cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> load_SBML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path_SBML)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sbml_species </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> species</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rn)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getcompartment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sbml_species[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div>`,5)),e(a,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[6]||(s[6]=[i("a",{href:"https://github.com/sebapersson/SBMLImporter.jl/blob/1ecf45f449a5811121e98771c7e86c8b600e57bf/src/util.jl#L1-L16",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})])])}const C=p(o,[["render",E]]);export{f as __pageData,C as default};
