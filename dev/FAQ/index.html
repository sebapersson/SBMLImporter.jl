<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>FAQs · SBMLImporter.jl</title><meta name="title" content="FAQs · SBMLImporter.jl"/><meta property="og:title" content="FAQs · SBMLImporter.jl"/><meta property="twitter:title" content="FAQs · SBMLImporter.jl"/><meta name="description" content="Documentation for SBMLImporter.jl."/><meta property="og:description" content="Documentation for SBMLImporter.jl."/><meta property="twitter:description" content="Documentation for SBMLImporter.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom_theme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SBMLImporter.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><a class="tocitem" href="../API/">API</a></li><li><a class="tocitem" href="../support/">Supported SBML featuers</a></li><li><a class="tocitem" href="../differences/">Other SBML related Julia packages</a></li><li class="is-active"><a class="tocitem" href>FAQs</a><ul class="internal"><li><a class="tocitem" href="#Why-do-I-get-the-error-Any[...]-are-either-missing-from-the-variable-map-or-missing-from-the-system&#39;s-states/parameters-list?"><span>Why do I get the error <code>Any[...] are either missing from the variable map or missing from the system&#39;s states/parameters list</code>?</span></a></li><li><a class="tocitem" href="#How-can-I-check-if-my-model-follows-mass-action-kinetics?"><span>How can I check if my model follows mass action kinetics?</span></a></li><li><a class="tocitem" href="#Why-does-one-of-the-SBML-model-parameters-not-appear-among-the-system-parameters?"><span>Why does one of the SBML model parameters not appear among the system parameters?</span></a></li><li><a class="tocitem" href="#Why-does-my-simulation-fail-with-DomainError-while-the-model-imports-fine?"><span>Why does my simulation fail with <code>DomainError</code> while the model imports fine?</span></a></li><li><a class="tocitem" href="#Why-did-I-get-the-SBMLSupport-error?"><span>Why did I get the <code>SBMLSupport</code> error?</span></a></li><li><a class="tocitem" href="#Do-you-support-SBML-export?"><span>Do you support SBML export?</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>FAQs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>FAQs</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sebapersson/SBMLImporter.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/sebapersson/SBMLImporter.jl/blob/main/docs/src/FAQ.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="FAQ"><a class="docs-heading-anchor" href="#FAQ">FAQs</a><a id="FAQ-1"></a><a class="docs-heading-anchor-permalink" href="#FAQ" title="Permalink"></a></h1><h2 id="Why-do-I-get-the-error-Any[...]-are-either-missing-from-the-variable-map-or-missing-from-the-system&#39;s-states/parameters-list?"><a class="docs-heading-anchor" href="#Why-do-I-get-the-error-Any[...]-are-either-missing-from-the-variable-map-or-missing-from-the-system&#39;s-states/parameters-list?">Why do I get the error <code>Any[...] are either missing from the variable map or missing from the system&#39;s states/parameters list</code>?</a><a id="Why-do-I-get-the-error-Any[...]-are-either-missing-from-the-variable-map-or-missing-from-the-system&#39;s-states/parameters-list?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-do-I-get-the-error-Any[...]-are-either-missing-from-the-variable-map-or-missing-from-the-system&#39;s-states/parameters-list?" title="Permalink"></a></h2><p>This error probably occurs because the model has an SBML <a href="https://synonym.caltech.edu/software/libsbml/5.18.0/docs/formatted/java-api/?org/sbml/libsbml/AssignmentRule.html">assignment rule</a>. Assignment rules describe the assignment of an equation to a variable:</p><pre><code class="language-julia hljs">var = assignment # var ~ assignment in ModelingToolkit syntax</code></pre><p>To be able to simulate the model assignment rules must be inlined into the model equations. This can be done with the <code>structural_simplify</code> function from <a href="https://github.com/SciML/ModelingToolkit.jl">ModelingToolkit</a>. For example, for an ODE model do:</p><pre><code class="language-julia hljs">using SBMLImporter, ModelingToolkit
prn, cb = load_SBML(path)
sys = structural_simplify(convert(ODESystem, prn.rn))
oprob = ODEProblem(sys, prn.u0, tspan, prn.p)</code></pre><h2 id="How-can-I-check-if-my-model-follows-mass-action-kinetics?"><a class="docs-heading-anchor" href="#How-can-I-check-if-my-model-follows-mass-action-kinetics?">How can I check if my model follows mass action kinetics?</a><a id="How-can-I-check-if-my-model-follows-mass-action-kinetics?-1"></a><a class="docs-heading-anchor-permalink" href="#How-can-I-check-if-my-model-follows-mass-action-kinetics?" title="Permalink"></a></h2><p>For efficient jump simulations (Gillespie type), the model should ideally follow chemical mass action kinetics. To inform the importer about mass action kinetics simply set the keyword argument <code>massaction=true</code> in <code>load_SBML</code>. Now, if you are unsure whether the model follows mass action kinetics, simply provide <code>massaction=true</code>. If the model does not adhere to mass action kinetics, a warning is thrown:</p><pre><code class="nohighlight hljs">Warning: That the system is massaction was provided, however, the reaction r is not massaction. It is parsed as non massaction reaction, which can negatively impact simulation times</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The <code>massaction</code> keyword argument is only relevant for jump simulations. If you import the model as a <code>SDEProblem</code> or an <code>ODEProblem</code>, you can (and should) ignore this keyword argument.</p></div></div><h2 id="Why-does-one-of-the-SBML-model-parameters-not-appear-among-the-system-parameters?"><a class="docs-heading-anchor" href="#Why-does-one-of-the-SBML-model-parameters-not-appear-among-the-system-parameters?">Why does one of the SBML model parameters not appear among the system parameters?</a><a id="Why-does-one-of-the-SBML-model-parameters-not-appear-among-the-system-parameters?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-does-one-of-the-SBML-model-parameters-not-appear-among-the-system-parameters?" title="Permalink"></a></h2><p>If one of the model parameters does not appear among the system parameters:</p><pre><code class="language-julia hljs">prn, cb = load_SBML(path)
parameters(prn)</code></pre><p>but appears in the model variables:</p><pre><code class="language-julia hljs">unknowns(prn)</code></pre><p>this is likely because the parameter is not set as constant in the SBML file, e.g.:</p><pre><code class="language-SBML hljs">&lt;parameter id=&quot;c&quot; value=&quot;1.0&quot; constant=&quot;false&quot;/&gt;</code></pre><p>If a parameter is set to have <code>constant=&quot;false&quot;</code>, the importer must treat the parameter as a variable since it can change over time (explicitly depend on time), as Julia <code>ReactionSystem</code> parameters are assumed to time invariant. If the parameter should indeed be constant (e.g. at most be changed by an event), change the parameter in the model file:</p><pre><code class="language-SBML hljs">&lt;parameter id=&quot;c&quot; value=&quot;1.0&quot; constant=&quot;true&quot;/&gt;</code></pre><h2 id="Why-does-my-simulation-fail-with-DomainError-while-the-model-imports-fine?"><a class="docs-heading-anchor" href="#Why-does-my-simulation-fail-with-DomainError-while-the-model-imports-fine?">Why does my simulation fail with <code>DomainError</code> while the model imports fine?</a><a id="Why-does-my-simulation-fail-with-DomainError-while-the-model-imports-fine?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-does-my-simulation-fail-with-DomainError-while-the-model-imports-fine?" title="Permalink"></a></h2><p>This typically happens due to two reasons. Firstly, the model might contain a function call where the argument must be positive, such as:</p><pre><code class="language-julia hljs">log(specie)</code></pre><p>Even though the model might be written such that <code>specie</code> should never go below 0 (e.g., the model follows mass action kinetics), numerical errors can cause <code>specie</code> to go below zero. Therefore, instead of encoding risky statements into the model such as <code>log(specie)</code>, it might be better to encode something like <code>log(specie + 1e-8)</code>.</p><p>Secondly <code>DomainError</code> might arise due to how SBMLImporter parses SBML piecewise expressions. Piecewise expressions are first parsed into <code>ifelse</code> functions:</p><pre><code class="language-julia hljs">ifelse(condition, x, y)</code></pre><p>Which when <code>condition == true</code> evaluates to <code>x</code>, otherwise to <code>y</code>. In SBMLImporter <code>ifelse</code> expressions are further rewritten to callbacks (events). Hence, in the model equations the <code>ifelse</code> is converted to:</p><pre><code class="language-julia hljs">(1 - condition_bool) * x + condition_bool * y</code></pre><p>Here <code>condition_bool</code> is assigned via a callback (event) to be <code>1</code> when <code>condition</code> is <code>true</code>, and to <code>0</code> when <code>condition</code> if <code>false</code>. This has the same functionality as an <code>ifelse</code>, but is numerically more stable because the integrator (e.g., ODE solver) actually stops at points <code>condition</code> changes. Instead, with <code>ifelse</code>, the integrator does not know an event happens and thus must typically reduce its step size to handle the sudden change in models dynamics. This increases simulation time, and reduces simulation stability (e.g. ODE solvers fail more frequently). However, sometimes the formulas in the <code>ifelse</code> might depend on the <code>condition</code>. For example, let&#39;s say we have:</p><pre><code class="language-julia hljs">ifelse(t &gt; 1, 0, log(t - 1))</code></pre><p>With the <code>ifelse</code> formulation, <code>log(t - 1)</code> is never evaluated until <code>t &gt; 1</code>. With the callback formulation:</p><pre><code class="language-julia hljs">(1 - condition_bool) * 0 + condition_bool * log(t-1)</code></pre><p><code>log(t-1)</code> is evaluated for time-points <code>t &lt; 1</code> which causes <code>DomainError</code>. This can be solved by simply not rewriting <code>ifelse</code> to callback when importing the model:</p><pre><code class="language-julia hljs">prn, cb = load_SBML(path; ifelse_to_callback = false)</code></pre><p>If neither of the above solutions work, please file an issue on <a href="https://github.com/sebapersson/SBMLImporter.jl">GitHub</a>.</p><h2 id="Why-did-I-get-the-SBMLSupport-error?"><a class="docs-heading-anchor" href="#Why-did-I-get-the-SBMLSupport-error?">Why did I get the <code>SBMLSupport</code> error?</a><a id="Why-did-I-get-the-SBMLSupport-error?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-did-I-get-the-SBMLSupport-error?" title="Permalink"></a></h2><p>You likely got this error because your SBML model contains an SBML feature that SBMLImporter does not support yet. An extensive list of supported features can be found <a href="../support/#support">here</a>. If SBMLImporter lacks support for a feature you would like to have, please file an issue on <a href="https://github.com/sebapersson/SBMLImporter.jl">GitHub</a>.</p><h2 id="Do-you-support-SBML-export?"><a class="docs-heading-anchor" href="#Do-you-support-SBML-export?">Do you support SBML export?</a><a id="Do-you-support-SBML-export?-1"></a><a class="docs-heading-anchor-permalink" href="#Do-you-support-SBML-export?" title="Permalink"></a></h2><p>We currently do not support exporting Catalyst <code>ReactionSystem</code> to SBML. Most things are available in Julia for supporting SBML export though, so if anyone is interested, we would be happy to provide guidance for creating a SBMLExporter package.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../differences/">« Other SBML related Julia packages</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Monday 22 July 2024 04:55">Monday 22 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
